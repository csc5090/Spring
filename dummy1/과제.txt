javac는 Java 컴파일러를 실행하는 명령어이며, 소스 코드(.java)를 실행 가능한 바이트 코드(.class)로 변환한다.

일단 MessageService.java 컴파일 먼저.


javac -d classes -cp "lib\datafaker-2.5.3.jar" src/MessageService.java

-d classes : classes 폴더에 .class 파일을 저장한다는 뜻.
-cp "lib\datafaker-2.5.3.jar" : MessageService가 사용하는 외부 클래스(Faker)의 정의를 찾을 수 있도록 물리적 위치(.jar가 있는 실제 경로)를 컴파일러에게 알려줌.
컴파일을 위해 꼭 알아야하는(MessageService.java 내에 코드로 구현되어 있는 import) 절대 경로를 알려주는 것.


javac -d classes -cp classes src/PrintMessage.java

Main클래스가 있는 PrintMessage.java를 컴파일 할 때는 PrintMessage 클래스가 외부 라이브러리(DataFaker)의 클래스를 직접 사용하지 않기 때문에  절대 경로를 알려줄 필요가 없음.


java -cp "classes;lib/*" kr.or.ddit.PrintMessage

그러나 실행 단계에서는 반드시 lib의 절대경로를 알려줘야 함.
PrintMessage든 MessageService든 모든 클래스가 사용하는 모든 JAR 파일을 포함해야 함.

JVM이 실제로 service.getMessage()를 호출하여 MessageService 코드를 실행할 때, 그 코드 안에 있는 new Faker() 부분이 작동하기에 반드시 참조가 필요.

물론 "classes;lib/datafaker-2.5.3.jar" 도 가능. 다만, 업데이트가 되어 버전이 바뀌면 이 부분을 수정해줘야 하니 귀찮음.

***

net.datafaker.Faker; 


net.datafaker.Faker는 논리적 경로(퀄리파이드 네임).
datafaker를 만든 사람이 그냥 그렇게 정해서 어쩔 수 없이 그렇게 써야함...